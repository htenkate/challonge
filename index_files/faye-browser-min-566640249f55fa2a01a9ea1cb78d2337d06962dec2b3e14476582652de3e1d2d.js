!function(){"use strict";var Faye={VERSION:"1.1.2",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:"undefined"!=typeof window?window:global,extend:function(t,e,n){if(!e)return t;for(var s in e)e.hasOwnProperty(s)&&(t.hasOwnProperty(s)&&n===!1||t[s]!==e[s]&&(t[s]=e[s]));return t},random:function(t){t=t||this.ID_LENGTH;for(var e=Math.ceil(t*Math.log(2)/Math.log(36)),n=csprng(t,36);n.length<e;)n="0"+n;return n},validateOptions:function(t,e){for(var n in t)if(this.indexOf(e,n)<0)throw Error("Unrecognized option: "+n)},clientIdFromMessages:function(t){var e=this.filter([].concat(t),function(t){return"/meta/connect"===t.channel});return e[0]&&e[0].clientId},copyObject:function(t){var e,n,s;if(t instanceof Array){for(e=[],n=t.length;n--;)e[n]=Faye.copyObject(t[n]);return e}if("object"==typeof t){e=null===t?null:{};for(s in t)e[s]=Faye.copyObject(t[s]);return e}return t},commonElement:function(t,e){for(var n=0,s=t.length;s>n;n++)if(-1!==this.indexOf(e,t[n]))return t[n];return null},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,s=t.length;s>n;n++)if(t[n]===e)return n;return-1},map:function(t,e,n){if(t.map)return t.map(e,n);var s=[];if(t instanceof Array)for(var r=0,i=t.length;i>r;r++)s.push(e.call(n||null,t[r],r));else for(var a in t)t.hasOwnProperty(a)&&s.push(e.call(n||null,a,t[a]));return s},filter:function(t,e,n){if(t.filter)return t.filter(e,n);for(var s=[],r=0,i=t.length;i>r;r++)e.call(n||null,t[r],r)&&s.push(t[r]);return s},asyncEach:function(t,e,n,s){var r=t.length,i=-1,a=0,o=!1,h=function(){return a-=1,i+=1,i===r?n&&n.call(s):void e(t[i],l)},u=function(){if(!o){for(o=!0;a>0;)h();o=!1}},l=function(){a+=1,u()};l()},toJSON:function(t){return this.stringify?this.stringify(t,function(t,e){return this[t]instanceof Array?this[t]:e}):JSON.stringify(t)}};"undefined"!=typeof module?module.exports=Faye:"undefined"!=typeof window&&(window.Faye=Faye),Faye.Class=function(t,e){"function"!=typeof t&&(e=t,t=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},s=function(){};return s.prototype=t.prototype,n.prototype=new s,Faye.extend(n.prototype,e),n},function(){function t(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}var e=Faye.EventEmitter=function(){},n="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||n(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var s=Array.prototype.slice.call(arguments,1);e.apply(this,s)}return!0}if(n(e)){for(var s=Array.prototype.slice.call(arguments,1),r=e.slice(),i=0,a=r.length;a>i;i++)r[i].apply(this,s);return!0}return!1},e.prototype.addListener=function(t,e){if("function"!=typeof e)throw Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){var n=this;return n.on(t,function s(){n.removeListener(t,s),e.apply(this,arguments)}),this},e.prototype.removeListener=function(e,s){if("function"!=typeof s)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var r=this._events[e];if(n(r)){var i=t(r,s);if(0>i)return this;r.splice(i,1),0==r.length&&delete this._events[e]}else this._events[e]===s&&delete this._events[e];return this},e.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},e.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),n(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(),Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(t){return this._used.hasOwnProperty(t)},generate:function(){for(var t=Faye.random();this._used.hasOwnProperty(t);)t=Faye.random();return this._used[t]=t},release:function(t){delete this._used[t]}}),function(){var t,e=setTimeout;t="function"==typeof setImmediate?function(t){setImmediate(t)}:"object"==typeof process&&process.nextTick?function(t){process.nextTick(t)}:function(t){e(t,0)};var n=0,s=1,r=2,i=function(t){return t},a=function(t){throw t},o=function(t){if(this._state=n,this._onFulfilled=[],this._onRejected=[],"function"==typeof t){var e=this;t(function(t){d(e,t)},function(t){p(e,t)})}};o.prototype.then=function(t,e){var n=new o;return h(this,t,n),u(this,e,n),n};var h=function(t,e,r){"function"!=typeof e&&(e=i);var a=function(t){l(e,t,r)};t._state===n?t._onFulfilled.push(a):t._state===s&&a(t._value)},u=function(t,e,s){"function"!=typeof e&&(e=a);var i=function(t){l(e,t,s)};t._state===n?t._onRejected.push(i):t._state===r&&i(t._reason)},l=function(e,n,s){t(function(){c(e,n,s)})},c=function(t,e,n){var s;try{s=t(e)}catch(r){return p(n,r)}s===n?p(n,new TypeError("Recursive promise chain detected")):d(n,s)},d=o.fulfill=o.resolve=function(t,e){var n,s,r=!1;try{if(n=typeof e,s=null!==e&&("function"===n||"object"===n)&&e.then,"function"!=typeof s)return f(t,e);s.call(e,function(e){r^(r=!0)&&d(t,e)},function(e){r^(r=!0)&&p(t,e)})}catch(i){if(!(r^(r=!0)))return;p(t,i)}},f=function(t,e){if(t._state===n){t._state=s,t._value=e,t._onRejected=[];for(var r,i=t._onFulfilled;r=i.shift();)r(e)}},p=o.reject=function(t,e){if(t._state===n){t._state=r,t._reason=e,t._onFulfilled=[];for(var s,i=t._onRejected;s=i.shift();)s(e)}};o.all=function(t){return new o(function(e,n){var s,r=[],i=t.length;if(0===i)return e(r);for(s=0;i>s;s++)(function(t,s){o.fulfilled(t).then(function(t){r[s]=t,0===--i&&e(r)},n)})(t[s],s)})},o.defer=t,o.deferred=o.pending=function(){var t={};return t.promise=new o(function(e,n){t.fulfill=t.resolve=e,t.reject=n}),t},o.fulfilled=o.resolved=function(t){return new o(function(e){e(t)})},o.rejected=function(t){return new o(function(e,n){n(t)})},void 0===Faye?module.exports=o:Faye.Promise=o}(),Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(t){var e=void 0!==t.id?t.id:t;return this._index.hasOwnProperty(e)?!1:(this._index[e]=t,!0)},forEach:function(t,e){for(var n in this._index)this._index.hasOwnProperty(n)&&t.call(e,this._index[n])},isEmpty:function(){for(var t in this._index)if(this._index.hasOwnProperty(t))return!1;return!0},member:function(t){for(var e in this._index)if(this._index[e]===t)return!0;return!1},remove:function(t){var e=void 0!==t.id?t.id:t,n=this._index[e];return delete this._index[e],n},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}}),Faye.URI={isURI:function(t){return t&&t.protocol&&t.host&&t.path},isSameOrigin:function(t){var e=Faye.ENV.location;return t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port},parse:function(t){if("string"!=typeof t)return t;var e,n,s,r,i,a,o={},h=function(e,n){t=t.replace(n,function(t){return o[e]=t,""}),o[e]=o[e]||""};for(h("protocol",/^[a-z]+\:/i),h("host",/^\/\/[^\/\?#]+/),/^\//.test(t)||o.host||(t=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+t),h("pathname",/^[^\?#]*/),h("search",/^\?[^#]*/),h("hash",/^#.*/),o.protocol=o.protocol||Faye.ENV.location.protocol,o.host?(o.host=o.host.substr(2),e=o.host.split(":"),o.hostname=e[0],o.port=e[1]||""):(o.host=Faye.ENV.location.host,o.hostname=Faye.ENV.location.hostname,o.port=Faye.ENV.location.port),o.pathname=o.pathname||"/",o.path=o.pathname+o.search,n=o.search.replace(/^\?/,""),s=n?n.split("&"):[],a={},r=0,i=s.length;i>r;r++)e=s[r].split("="),a[decodeURIComponent(e[0]||"")]=decodeURIComponent(e[1]||"");return o.query=a,o.href=this.stringify(o),o},stringify:function(t){var e=t.protocol+"//"+t.hostname;return t.port&&(e+=":"+t.port),e+=t.pathname+this.queryString(t.query)+(t.hash||"")},queryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return 0===e.length?"":"?"+e.join("&")}},Faye.Error=Faye.Class({initialize:function(t,e,n){this.code=t,this.params=Array.prototype.slice.call(e),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(t){if(t=t||"",!Faye.Grammar.ERROR.test(t))return new this(null,[],t);var e=t.split(":"),n=parseInt(e[0]),s=e[1].split(","),t=e[2];return new this(n,s,t)},Faye.Error.versionMismatch=function(){return""+new this(300,arguments,"Version mismatch")},Faye.Error.conntypeMismatch=function(){return""+new this(301,arguments,"Connection types not supported")},Faye.Error.extMismatch=function(){return""+new this(302,arguments,"Extension mismatch")},Faye.Error.badRequest=function(){return""+new this(400,arguments,"Bad request")},Faye.Error.clientUnknown=function(){return""+new this(401,arguments,"Unknown client")},Faye.Error.parameterMissing=function(){return""+new this(402,arguments,"Missing required parameter")},Faye.Error.channelForbidden=function(){return""+new this(403,arguments,"Forbidden channel")},Faye.Error.channelUnknown=function(){return""+new this(404,arguments,"Unknown channel")},Faye.Error.channelInvalid=function(){return""+new this(405,arguments,"Invalid channel")},Faye.Error.extUnknown=function(){return""+new this(406,arguments,"Unknown extension")},Faye.Error.publishFailed=function(){return""+new this(407,arguments,"Failed to publish")},Faye.Error.serverError=function(){return""+new this(500,arguments,"Internal server error")},Faye.Deferrable={then:function(t,e){var n=this;return this._promise||(this._promise=new Faye.Promise(function(t,e){n._fulfill=t,n._reject=e})),0===arguments.length?this._promise:this._promise.then(t,e)},callback:function(t,e){return this.then(function(n){t.call(e,n)})},errback:function(t,e){return this.then(null,function(n){t.call(e,n)})},timeout:function(t,e){this.then();var n=this;this._timer=Faye.ENV.setTimeout(function(){n._reject(e)},1e3*t)},setDeferredStatus:function(t,e){this._timer&&Faye.ENV.clearTimeout(this._timer),this.then(),"succeeded"===t?this._fulfill(e):"failed"===t?this._reject(e):delete this._promise}},Faye.Publisher={countListeners:function(t){return this.listeners(t).length},bind:function(t,e,n){var s=Array.prototype.slice,r=function(){e.apply(n,s.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([t,e,n,r]),this.on(t,r)},unbind:function(t,e,n){this._listeners=this._listeners||[];for(var s,r=this._listeners.length;r--;)s=this._listeners[r],s[0]===t&&(!e||s[1]===e&&s[2]===n)&&(this._listeners.splice(r,1),this.removeListener(t,s[3]))}},Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype),Faye.Publisher.trigger=Faye.Publisher.emit,Faye.Timeouts={addTimeout:function(t,e,n,s){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(t)){var r=this;this._timeouts[t]=Faye.ENV.setTimeout(function(){delete r._timeouts[t],n.call(s)},1e3*e)}},removeTimeout:function(t){this._timeouts=this._timeouts||{};var e=this._timeouts[t];e&&(Faye.ENV.clearTimeout(e),delete this._timeouts[t])},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var t in this._timeouts)this.removeTimeout(t)}},Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(t,e){if(Faye.logger){var n=Array.prototype.slice.apply(t),s="[Faye",r=this.className,i=n.shift().replace(/\?/g,function(){try{return Faye.toJSON(n.shift())}catch(t){return"[Object]"}});for(var a in Faye)r||"function"==typeof Faye[a]&&this instanceof Faye[a]&&(r=a);r&&(s+="."+r),s+="] ","function"==typeof Faye.logger[e]?Faye.logger[e](s+i):"function"==typeof Faye.logger&&Faye.logger(s+i)}}},function(){for(var t in Faye.Logging.LOG_LEVELS)(function(t){Faye.Logging[t]=function(){this.writeLog(arguments,t)}})(t)}(),Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/},Faye.Extensible={addExtension:function(t){this._extensions=this._extensions||[],this._extensions.push(t),t.added&&t.added(this)},removeExtension:function(t){if(this._extensions)for(var e=this._extensions.length;e--;)this._extensions[e]===t&&(this._extensions.splice(e,1),t.removed&&t.removed(this))},pipeThroughExtensions:function(t,e,n,s,r){if(this.debug("Passing through ? extensions: ?",t,e),!this._extensions)return s.call(r,e);var i=this._extensions.slice(),a=function(e){if(!e)return s.call(r,e);var o=i.shift();if(!o)return s.call(r,e);var h=o[t];return h?void(h.length>=3?o[t](e,n,a):o[t](e,a)):a(e)};a(e)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(t){this.id=this.name=t},push:function(t){this.trigger("message",t)},isUnused:function(){return 0===this.countListeners("message")}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(t){var e=this.parse(t),n=["/**",t],s=e.slice();s[s.length-1]="*",n.push(this.unparse(s));for(var r=1,i=e.length;i>r;r++)s=e.slice(0,r),s.push("**"),n.push(this.unparse(s));return n},isValid:function(t){return Faye.Grammar.CHANNEL_NAME.test(t)||Faye.Grammar.CHANNEL_PATTERN.test(t)},parse:function(t){return this.isValid(t)?t.split("/").slice(1):null},unparse:function(t){return"/"+t.join("/")},isMeta:function(t){var e=this.parse(t);return e?e[0]===this.META:null},isService:function(t){var e=this.parse(t);return e?e[0]===this.SERVICE:null},isSubscribable:function(t){return this.isValid(t)?!this.isMeta(t)&&!this.isService(t):null},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var t=[];for(var e in this._channels)t.push(e);return t},remove:function(t){delete this._channels[t]},hasSubscription:function(t){return this._channels.hasOwnProperty(t)},subscribe:function(t,e,n){for(var s,r=0,i=t.length;i>r;r++){s=t[r];var a=this._channels[s]=this._channels[s]||new Faye.Channel(s);e&&a.bind("message",e,n)}},unsubscribe:function(t,e,n){var s=this._channels[t];return s?(s.unbind("message",e,n),s.isUnused()?(this.remove(t),!0):!1):!1},distributeMessage:function(t){for(var e=Faye.Channel.expand(t.channel),n=0,s=e.length;s>n;n++){var r=this._channels[e[n]];r&&r.trigger("message",t.data)}}})}),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(t,e,n,s){this._client=t,this._channels=e,this._callback=n,this._context=s,this._cancelled=!1},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this._callback,this._context),this._cancelled=!0)},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(t,e){this.info("New client created for ?",t),e=e||{},Faye.validateOptions(e,["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._endpoint=t||this.DEFAULT_ENDPOINT,this._channels=new Faye.Channel.Set,this._dispatcher=new Faye.Dispatcher(this,this._endpoint,e),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(e.interval||this.INTERVAL),timeout:1e3*(e.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(t){return this._dispatcher.addWebsocketExtension(t)},disable:function(t){return this._dispatcher.disable(t)},setHeader:function(t,e){return this._dispatcher.setHeader(t,e)},handshake:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var n=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this._endpoint)),this._dispatcher.selectTransport(Faye.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(s){s.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=s.clientId,this._dispatcher.selectTransport(s.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),t&&Faye.Promise.defer(function(){t.call(e)})):(this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){n.handshake(t,e)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,e)},this);this.callback(t,e),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:Faye.Channel.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var t=new Faye.Publication;return this._sendMessage({channel:Faye.Channel.DISCONNECT,clientId:this._dispatcher.clientId},{},function(e){e.successful?(this._dispatcher.close(),t.setDeferredStatus("succeeded")):t.setDeferredStatus("failed",Faye.Error.parse(e.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new Faye.Channel.Set,t}},subscribe:function(t,e,n){if(t instanceof Array)return Faye.map(t,function(t){return this.subscribe(t,e,n)},this);var s=new Faye.Subscription(this,t,e,n),r=e===!0,i=this._channels.hasSubscription(t);return i&&!r?(this._channels.subscribe([t],e,n),s.setDeferredStatus("succeeded"),s):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,t),r||this._channels.subscribe([t],e,n),this._sendMessage({channel:Faye.Channel.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(r){if(!r.successful)return s.setDeferredStatus("failed",Faye.Error.parse(r.error)),this._channels.unsubscribe(t,e,n);var i=[].concat(r.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,i),s.setDeferredStatus("succeeded")},this)},this),s)},unsubscribe:function(t,e,n){if(t instanceof Array)return Faye.map(t,function(t){return this.unsubscribe(t,e,n)},this);var s=this._channels.unsubscribe(t,e,n);s&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,t),this._sendMessage({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(t){if(t.successful){var e=[].concat(t.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,e)}},this)},this)},publish:function(t,e,n){Faye.validateOptions(n||{},["attempts","deadline"]);var s=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,t,e),this._sendMessage({channel:t,data:e,clientId:this._dispatcher.clientId},n,function(t){t.successful?s.setDeferredStatus("succeeded"):s.setDeferredStatus("failed",Faye.Error.parse(t.error))},this)},this),s},_sendMessage:function(t,e,n,s){t.id=this._generateMessageId();var r=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",t,null,function(t){t&&(n&&(this._responseCallbacks[t.id]=[n,s]),this._dispatcher.sendMessage(t,r,e||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(t){var e,n=t.id;void 0!==t.successful&&(e=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),e&&e[0].call(e[1],t))},this)},_handleAdvice:function(t){Faye.extend(this._advice,t),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var t=this;Faye.ENV.setTimeout(function(){t.connect()},this._advice.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Dispatcher=Faye.Class({MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(t,e,n){this._client=t,this.endpoint=Faye.URI.parse(e),this._alternates=n.endpoints||{},this.cookies=Faye.Cookies&&new Faye.Cookies.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=n.retry||this.DEFAULT_RETRY,this._scheduler=n.scheduler||Faye.Scheduler,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=n.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var s=n.websocketExtensions;if(s){s=[].concat(s);for(var r=0,i=s.length;i>r;r++)this.addWebsocketExtension(s[r])}this.tls=n.tls||{},this.tls.ca=this.tls.ca||n.ca;for(var a in this._alternates)this._alternates[a]=Faye.URI.parse(this._alternates[a]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(t){return this._alternates[t]||this.endpoint},addWebsocketExtension:function(t){this.wsExtensions.push(t)},disable:function(t){this._disabled.push(t)},setHeader:function(t,e){this.headers[t]=e},close:function(){var t=this._transport;delete this._transport,t&&t.close()},getConnectionTypes:function(){return Faye.Transport.getConnectionTypes()},selectTransport:function(t){Faye.Transport.get(this,t,this._disabled,function(t){this.debug("Selected ? transport for ?",t.connectionType,Faye.URI.stringify(t.endpoint)),t!==this._transport&&(this._transport&&this._transport.close(),this._transport=t,this.connectionType=t.connectionType)},this)},sendMessage:function(t,e,n){n=n||{};var s,r=t.id,i=n.attempts,a=n.deadline&&(new Date).getTime()+1e3*n.deadline,o=this._envelopes[r];o||(s=new this._scheduler(t,{timeout:e,interval:this.retry,attempts:i,deadline:a}),o=this._envelopes[r]={message:t,scheduler:s}),this._sendEnvelope(o)},_sendEnvelope:function(t){if(this._transport&&!t.request&&!t.timer){var e=t.message,n=t.scheduler,s=this;if(!n.isDeliverable())return n.abort(),void delete this._envelopes[e.id];t.timer=Faye.ENV.setTimeout(function(){s.handleError(e)},1e3*n.getTimeout()),n.send(),t.request=this._transport.sendMessage(e)}},handleResponse:function(t){var e=this._envelopes[t.id];void 0!==t.successful&&e&&(e.scheduler.succeed(),delete this._envelopes[t.id],Faye.ENV.clearTimeout(e.timer)),this.trigger("message",t),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(t,e){var n=this._envelopes[t.id],s=n&&n.request,r=this;if(s){s.then(function(t){t&&t.abort&&t.abort()});var i=n.scheduler;i.fail(),Faye.ENV.clearTimeout(n.timer),n.request=n.timer=null,e?this._sendEnvelope(n):n.timer=Faye.ENV.setTimeout(function(){n.timer=null,r._sendEnvelope(n)},1e3*i.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down"))}}}),Faye.extend(Faye.Dispatcher.prototype,Faye.Publisher),Faye.extend(Faye.Dispatcher.prototype,Faye.Logging),Faye.Scheduler=function(t,e){this.message=t,this.options=e,this.attempts=0},Faye.extend(Faye.Scheduler.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var t=this.options.attempts,e=this.attempts,n=this.options.deadline,s=(new Date).getTime();return void 0!==t&&e>=t?!1:void 0!==n&&s>n?!1:!0},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),Faye.Transport=Faye.extend(Faye.Class({DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},SECURE_PROTOCOLS:["https:","wss:"],MAX_DELAY:0,batching:!0,initialize:function(t,e){this._dispatcher=t,this.endpoint=e,this._outbox=[],this._proxy=Faye.extend({},this._dispatcher.proxy),!this._proxy.origin&&Faye.NodeAdapter&&(this._proxy.origin=Faye.indexOf(this.SECURE_PROTOCOLS,this.endpoint.protocol)>=0?process.env.HTTPS_PROXY||process.env.https_proxy:process.env.HTTP_PROXY||process.env.http_proxy)},close:function(){},encode:function(){return""},sendMessage:function(t){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),t),this.batching?(this._outbox.push(t),this._promise=this._promise||new Faye.Promise,this._flushLargeBatch(),t.channel===Faye.Channel.HANDSHAKE?(this.addTimeout("publish",.01,this._flush,this),this._promise):(t.channel===Faye.Channel.CONNECT&&(this._connectMessage=t),this.addTimeout("publish",this.MAX_DELAY,this._flush,this),this._promise)):Faye.Promise.fulfilled(this.request([t]))},_flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),Faye.Promise.fulfill(this._promise,this.request(this._outbox)),delete this._promise,this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){var t=this.encode(this._outbox);if(!(t.length<this._dispatcher.maxRequestSize)){var e=this._outbox.pop();this._flush(),e&&this._outbox.push(e)}},_receive:function(t){if(t){t=[].concat(t),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,t);for(var e=0,n=t.length;n>e;e++)this._dispatcher.handleResponse(t[e])}},_handleError:function(t){t=[].concat(t),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,t);for(var e=0,n=t.length;n>e;e++)this._dispatcher.handleError(t[e])},_getCookies:function(){var t=this._dispatcher.cookies,e=Faye.URI.stringify(this.endpoint);return t?Faye.map(t.getCookiesSync(e),function(t){return t.cookieString()}).join("; "):""},_storeCookies:function(t){var e,n=this._dispatcher.cookies,s=Faye.URI.stringify(this.endpoint);if(t&&n){t=[].concat(t);for(var r=0,i=t.length;i>r;r++)e=Faye.Cookies.Cookie.parse(t[r]),n.setCookieSync(e,s)}}}),{get:function(t,e,n,s,r){var i=t.endpoint;Faye.asyncEach(this._transports,function(i,a){var o=i[0],h=i[1],u=t.endpointFor(o);return Faye.indexOf(n,o)>=0?a():Faye.indexOf(e,o)<0?(h.isUsable(t,u,function(){}),a()):void h.isUsable(t,u,function(e){if(!e)return a();var n=h.hasOwnProperty("create")?h.create(t,u):new h(t,u);s.call(r,n)})},function(){throw Error("Could not find a usable connection type for "+Faye.URI.stringify(i))})},register:function(t,e){this._transports.push([t,e]),e.prototype.connectionType=t},getConnectionTypes:function(){return Faye.map(this._transports,function(t){return t[0]})},_transports:[]}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_registry:[],on:function(t,e,n,s){var r=function(){n.call(s)};t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r),this._registry.push({_element:t,_type:e,_callback:n,_context:s,_handler:r})},detach:function(t,e,n,s){for(var r,i=this._registry.length;i--;)r=this._registry[i],t&&t!==r._element||e&&e!==r._type||n&&n!==r._callback||s&&s!==r._context||(r._element.removeEventListener?r._element.removeEventListener(r._type,r._handler,!1):r._element.detachEvent("on"+r._type,r._handler),this._registry.splice(i,1),r=null)}},void 0!==Faye.ENV.onunload&&Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,s,r,i,a,o=gap,h=e[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(e,t,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?h+"":"null";case"boolean":case"null":return h+"";case"object":if(!h)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(h)){for(i=h.length,n=0;i>n;n+=1)a[n]=str(n,h)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(s=rep[n],r=str(s,h),r&&a.push(quote(s)+(gap?": ":":")+r));else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(r=str(s,h),r&&a.push(quote(s)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;Faye.stringify=function(t,e,n){var s;if(gap="",indent="","number"==typeof n)for(s=0;n>s;s+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})},"function"!=typeof JSON.stringify&&(JSON.stringify=Faye.stringify),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,s,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s=walk(r,n),void 0!==s?r[n]=s:delete r[n]);return reviver.call(t,e,r)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)}),this.connect()},request:function(t){this._pending=this._pending||new Faye.Set;
for(var e=0,n=t.length;n>e;e++)this._pending.add(t[e]);var s=new Faye.Promise;return this.callback(function(e){e&&1===e.readyState&&(e.send(Faye.toJSON(t)),Faye.Promise.fulfill(s,e))},this),this.connect(),{abort:function(){s.then(function(t){t.close()})}}},connect:function(){if(!Faye.Transport.WebSocket._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var t=this._createSocket();if(!t)return this.setDeferredStatus("failed");var e=this;t.onopen=function(){t.headers&&e._storeCookies(t.headers["set-cookie"]),e._socket=t,e._state=e.CONNECTED,e._everConnected=!0,e._ping(),e.setDeferredStatus("succeeded",t)};var n=!1;t.onclose=t.onerror=function(){if(!n){n=!0;var s=e._state===e.CONNECTED;t.onopen=t.onclose=t.onerror=t.onmessage=null,delete e._socket,e._state=e.UNCONNECTED,e.removeTimeout("ping"),e.setDeferredStatus("unknown");var r=e._pending?e._pending.toArray():[];delete e._pending,s?e._handleError(r,!0):e._everConnected?e._handleError(r):e.setDeferredStatus("failed")}},t.onmessage=function(t){var n=JSON.parse(t.data);if(n){n=[].concat(n);for(var s=0,r=n.length;r>s;s++)void 0!==n[s].successful&&e._pending.remove(n[s]);e._receive(n)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var t=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),e=this._dispatcher.headers,n=this._dispatcher.wsExtensions,s=this._getCookies(),r=this._dispatcher.tls,i={extensions:n,headers:e,proxy:this._proxy,tls:r};return""!==s&&(i.headers.Cookie=s),Faye.WebSocket?new Faye.WebSocket.Client(t,[],i):Faye.ENV.MozWebSocket?new MozWebSocket(t):Faye.ENV.WebSocket?new WebSocket(t):void 0},_ping:function(){this._socket&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(t,e){var n=t.transports.websocket=t.transports.websocket||{};return n[e.href]=n[e.href]||new this(t,e),n[e.href]},getSocketUrl:function(t){return t=Faye.copyObject(t),t.protocol=this.PROTOCOLS[t.protocol],Faye.URI.stringify(t)},isUsable:function(t,e,n,s){this.create(t,e).isUsable(n,s)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=!0}),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(t,e){if(Faye.Transport.prototype.initialize.call(this,t,e),!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(t,e),e=Faye.copyObject(e),e.pathname+="/"+t.clientId;var n=new EventSource(Faye.URI.stringify(e)),s=this;n.onopen=function(){s._everConnected=!0,s.setDeferredStatus("succeeded")},n.onerror=function(){s._everConnected?s._handleError([]):(s.setDeferredStatus("failed"),n.close())},n.onmessage=function(t){s._receive(JSON.parse(t.data))},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)})},encode:function(t){return this._xhr.encode(t)},request:function(t){return this._xhr.request(t)}}),{isUsable:function(t,e,n,s){var r=t.clientId;return r?void Faye.Transport.XHR.isUsable(t,e,function(r){return r?void this.create(t,e).isUsable(n,s):n.call(s,!1)},this):n.call(s,!1)},create:function(t,e){var n=t.transports.eventsource=t.transports.eventsource||{},s=t.clientId,r=Faye.copyObject(e);return r.pathname+="/"+(s||""),r=Faye.URI.stringify(r),n[r]=n[r]||new this(t,e),n[r]}}),Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){return Faye.toJSON(t)},request:function(t){var e=this.endpoint.href,n=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,s=this;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Pragma","no-cache"),n.setRequestHeader("X-Requested-With","XMLHttpRequest");var r=this._dispatcher.headers;for(var i in r)r.hasOwnProperty(i)&&n.setRequestHeader(i,r[i]);var a=function(){n.abort()};return void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",a),n.onreadystatechange=function(){if(n&&4===n.readyState){var e=null,r=n.status,i=n.responseText,o=r>=200&&300>r||304===r||1223===r;if(void 0!==Faye.ENV.onbeforeunload&&Faye.Event.detach(Faye.ENV,"beforeunload",a),n.onreadystatechange=function(){},n=null,!o)return s._handleError(t);try{e=JSON.parse(i)}catch(h){}e?s._receive(e):s._handleError(t)}},n.send(this.encode(t)),n}}),{isUsable:function(t,e,n,s){n.call(s,Faye.URI.isSameOrigin(e))}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){return"message="+encodeURIComponent(Faye.toJSON(t))},request:function(t){var e,n=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,s=new n,r=++Faye.Transport.CORS._id,i=this._dispatcher.headers,a=this;if(s.open("POST",Faye.URI.stringify(this.endpoint),!0),s.setRequestHeader){s.setRequestHeader("Pragma","no-cache");for(e in i)i.hasOwnProperty(e)&&s.setRequestHeader(e,i[e])}var o=function(){return s?(Faye.Transport.CORS._pending.remove(r),s.onload=s.onerror=s.ontimeout=s.onprogress=null,void(s=null)):!1};return s.onload=function(){var e=null;try{e=JSON.parse(s.responseText)}catch(n){}o(),e?a._receive(e):a._handleError(t)},s.onerror=s.ontimeout=function(){o(),a._handleError(t)},s.onprogress=function(){},n===Faye.ENV.XDomainRequest&&Faye.Transport.CORS._pending.add({id:r,xhr:s}),s.send(this.encode(t)),s}}),{_id:0,_pending:new Faye.Set,isUsable:function(t,e,n,s){if(Faye.URI.isSameOrigin(e))return n.call(s,!1);if(Faye.ENV.XDomainRequest)return n.call(s,e.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var r=new Faye.ENV.XMLHttpRequest;return n.call(s,void 0!==r.withCredentials)}return n.call(s,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.copyObject(this.endpoint);return e.query.message=Faye.toJSON(t),e.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__",Faye.URI.stringify(e)},request:function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script"),s=Faye.Transport.JSONP.getCallbackName(),r=Faye.copyObject(this.endpoint),i=this;r.query.message=Faye.toJSON(t),r.query.jsonp=s;var a=function(){if(!Faye.ENV[s])return!1;Faye.ENV[s]=void 0;try{delete Faye.ENV[s]}catch(t){}n.parentNode.removeChild(n)};return Faye.ENV[s]=function(t){a(),i._receive(t)},n.type="text/javascript",n.src=Faye.URI.stringify(r),e.appendChild(n),n.onerror=function(){a(),i._handleError(t)},{abort:a}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(t,e,n,s){n.call(s,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP)}();